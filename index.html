<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Дополнительное профессиональное образование РЭУ</title>

    <link rel="stylesheet" href="./css/styles.css">

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container">
        <div class="page-1" id="page-1">
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Стратегическое управление и бизнес-администрирование</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>ESG и устойчивое развитие</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Беспилотная авиация</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Бесплатное обучение для жителей Москвы, занятых в сферах торговли, туризма и культурного наследия</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Китай: язык, экономика, закупки</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Маркетинг и продажи</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Предпринимательство, логистика и ВЭД</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Управление персоналом и психология бизнеса</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Бухгалтерский учет и аудит</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Управление бизнесом в интернете</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Цифровая экономика</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Fashion, креативные индустрии, retail</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>PR и журналистика</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Правовые основы. Юридическая деятельность</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Программы для вузовского сектора</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>IT. Информационные технологии</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Отраслевой менеджмент (в медицине, спорте и др.) </p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Языковая подготовка</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Профессиональная сертификация</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Школьникам и студентам</p>
                </div>
            </div>
            <div class="cat-button">
                <img src="./images/1.svg" alt="" srcset="">
                <div>
                    <p>Государственное и муниципальное управление. Закупки</p>
                </div>
            </div>
        </div>

        <div class="page-2" id="page-2">
            
        </div>

        <div class="page-3" id="page-3">
            <div class="q_fio">
                <label for="fio">ФИО</label>
                <input type="text" name="fio" id="fio" required>
            </div>
            <div class="q_fio">
                <label for="fac">Факультет</label>
                <select name="fac" id="fac" required>
                    <option value="Высшая школа экономики и бизнеса">Высшая школа экономики и бизнеса</option>
                    <option value="Высшая школа финансов">Высшая школа финансов</option> 
                    <option value="Специальный факультет талантливой молодежи «Высшая школа «Форсайт»">Специальный факультет талантливой молодежи «Высшая школа «Форсайт»</option> 
                    <option value="Высшая инженерная школа «Новые материалы и технологии»">Высшая инженерная школа «Новые материалы и технологии»</option> 
                    <option value="Высшая школа социально-гуманитарных наук">Высшая школа социально-гуманитарных наук</option> 
                    <option value="Высшая школа кибертехнологий, математики и статистики">Высшая школа кибертехнологий, математики и статистики</option> 
                    <option value="Высшая школа менеджмента">Высшая школа менеджмента</option> 
                    <option value="Высшая школа креативных индустрий">Высшая школа креативных индустрий</option> 
                    <option value="Первая Академия медиа">Первая Академия медиа</option> 
                    <option value="Высшая школа права">Высшая школа права</option>
                    <option value="Бизнес-школа маркетинга и предпринимательства">Бизнес-школа маркетинга и предпринимательства</option>
                    <option value="Факультет дополнительного профессионального образования">Факультет дополнительного профессионального образования</option>
                    <option value="Факультет «Плехановская школа бизнеса «Интеграл»">Факультет «Плехановская школа бизнеса «Интеграл»</option>
                    <option value="Факультет бизнеса «Капитаны»">Факультет бизнеса «Капитаны»</option>
                </select>
            </div>
            <div class="q_fio">
                <label for="lvl">Курс</label>
                <select name="lvl" id="lvl" required>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="Магистратура">Магистратура</option>
                    <option value="Аспирантура">Аспирантура</option>
                </select>
            </div>
            <div class="q_fio">
                <label for="grp">Группа (полностью)</label>
                <input type="text" name="grp" id="grp" placeholder="00.00А-АА00/00а">
            </div>
            <div class="q_fio">
                <label for="tel">Телефон</label>
                <input type="text" name="tel" id="tel">
            </div>
            <div class="q_fio">
                <label for="npr">Направление обучение</label>
                <input type="text" name="npr" id="npr" readonly>
            </div>
            <div class="q_fio">
                <label for="crs">Выберите программу из направления</label>
                <input type="text" name="crs" id="crs" readonly>
            </div>
            <div class="q_fio">
                <label for="frm">Выберите формат обучения</label>
                <div>
                    <input type="radio" name="frm" id="frm1" value="Очная">
                    <label for="frm1">Очная</label>
                </div>
                <div>
                    <input type="radio" name="frm" id="frm2" value="Заочная">
                    <label for="frm2">Заочная</label>
                </div>
                <div>
                    <input type="radio" name="frm" id="frm3" value="Очно-заочная">
                    <label for="frm3">Очно-заочная</label>
                </div>
            </div>
            <div class="q_fio">
                <label for="eml">Электронная почта</label>
                <input type="email" name="eml" id="eml">
            </div>
            <div class="q_fio">
                <div>
                    <input type="checkbox" name="isb" id="isb">
                    <label for="isb">Проходили ли курс обучения раньше</label>
                </div>
            </div>
        </div>
     </div>
</body>
<script type="text/javascript">
    var fullCategory = "";
    var fullCourse = "";


    function getCourse(value) {
        let course = value.innerHTML;
        fullCourse = course;

        $('#npr').val(fullCategory);
        $('#crs').val(fullCourse);

        $(".page-2").css({
            'opacity': '0',
        });
        setTimeout(() => {
            $(".page-2").css({
                "z-index": "-5",
                "display": "none",
            })
        }, 1000);
        setTimeout(() => {
            $(".page-3").css({
                'z-index': '10',
                'opacity': '1',
            });
        }, 500);
    }


    function getDevice() {
        let isMobile = {
            Android: function() {
                return navigator.userAgent.match(/Android/i);
            },
            iOS: function() {
                return navigator.userAgent.match(/iPhone|iPad|iPod/i);
            },
        };

        if (isMobile.iOS()) {
            $('.description').css({
                'font-size': '2.0rem',
            });
            $('.description').find('img').css({
                'width': '15%',
            });
            $('.info').css({
                'gap': '20px',
                'padding-left': '25px',
            });

            $('.cat-button').find("p").css({
                'font-size': '2.1rem',
            });
        } else if (isMobile.Android()) {
            $('.description').css({
                'font-size': '0.9rem',
            });
            $('.description').find('img').css({
                'width': '20%',
            });
            $('.info').css({
                'gap': '10px',
                'padding-left': '15px',
                'font-size': '0.7rem',
            });
            $('.course-button').css({
                'padding': '10px',
                'border-radius': '10px',
            });
        }
    }


    var courses;
    $(document).ready(function() {
        getDevice();

        $.getJSON('./data/data.json', function(data) {
            courses = data;
        });


        $(".cat-button").on("click", function() {
            $(this).parent().toggleClass('move-1');
            setTimeout(() => {
                $(this).parent().css({
                    "z-index": "-10",
                    "display": "none",
                })
            }, 500);

            setTimeout(() => {
                $(".page-2").css({
                    "opacity": "1",
                })
            }, 400);

            let cat = $(this).find('p').text();
            fullCategory = cat;
            for (let i = 0; i < courses.length; i++) {
                let course = courses[i];
                if (course['category'].includes(cat)) {
                    $('#page-2').append(
                        `
                            <div class="course-button">
                                <img src="./images/2.svg" alt="" srcset="">
                                <div class="description">
                                    <p class='title' onclick="getCourse(this)"> ` + course['title'] + ` </p>
                                    <div class="details">
                                        <div class="ccdet">
                                            <div class="info">
                                                <img src="./images/time.svg" alt="" srcset="">
                                                <p>` + course['duration'] + `</p>
                                            </div>
                                            <div class="info">
                                                <img src="./images/cost.svg" alt="" srcset="">
                                                <p>` + course['price'] + `</p>
                                            </div>
                                        </div>
                                        <div class="cfdet">
                                            <div class="info">
                                                <img src="./images/date.svg" alt="" srcset="">
                                                <p>` + course['start'] + `</p>
                                            </div>
                                            <div class="info">
                                                <a id="` + course['link'] + `" href="https://` + course['link'] + `">Подробнее...</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `
                    )
                }
            }

            getDevice();
        });

        
    });
 
    Telegram.WebApp.ready();
    Telegram.WebApp.MainButton.setText('Закрыть').show().onClick(function () {
        const data = JSON.stringify({
            'fio': $('#fio').val(),
        });

        Telegram.WebApp.sendData(data);
        Telegram.WebApp.close();
    });
    
    Telegram.WebApp.expand();
</script>
</html>